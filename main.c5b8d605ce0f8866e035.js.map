{"version":3,"sources":["webpack:///./templates/imageCard.hbs","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","url","key","page","searchForm","document","querySelector","input","ul","modalDiv","modalDivButton","modalImg","nextPicture","query","addEventListener","event","preventDefault","innerHTML","value","style","visibility","axios","get","then","response","hits","length","disabled","PNotify","error","pnotifySet","markup","reduce","acc","el","insertAdjacentHTML","text","delay","addClass","width","remove","stack","context","targets","getElementsByClassName","observer","IntersectionObserver","entries","resp","mark","root","rootMargin","threshold","closeModalWindow","setAttribute","forEach","target","observe","removeAttribute","className","src"],"mappings":"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","file":"main.c5b8d605ce0f8866e035.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"photo-card\\\">\\r\\n    <img class=\\\"gallery__image\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":37},\"end\":{\"line\":2,\"column\":53}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":60},\"end\":{\"line\":2,\"column\":68}}}) : helper)))\n    + \"\\\" bigsrc=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":78},\"end\":{\"line\":2,\"column\":95}}}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n        </p>\\r\\n        <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":14},\"end\":{\"line\":8,\"column\":23}}}) : helper)))\n    + \"</span>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">visibility</i>\\r\\n        </p>\\r\\n        <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":14},\"end\":{\"line\":12,\"column\":23}}}) : helper)))\n    + \"</span>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">comment</i>\\r\\n        </p>\\r\\n        <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":14},\"end\":{\"line\":16,\"column\":26}}}) : helper)))\n    + \"</span>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n        </p>\\r\\n        <span>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":14},\"end\":{\"line\":20,\"column\":27}}}) : helper)))\n    + \"</span>\\r\\n    </div>\\r\\n</div>\";\n},\"useData\":true});","import './styles.css';\r\nimport axios from 'axios';\r\nimport template from './templates/imageCard.hbs';\r\n// import PNotify from 'pnotify/dist/es/PNotify.js';\r\n\r\n\r\nconst url = `https://pixabay.com/api/?image_type=photo&orientation=horizontal`;\r\nconst key = `&key=15900106-2c235e732bb321ca7ec900d93`;\r\nlet page = 1;\r\nconst perPage = `&per_page=12`;\r\n\r\nconst searchForm = document.querySelector( `.search-form` )\r\nconst input = document.querySelector( `input` );\r\nconst ul = document.querySelector( `.gallery` );\r\nconst modalDiv = document.querySelector( `.lightbox` );\r\nconst modalDivButton = document.querySelector( `button[data-action=\"close-lightbox\"]` );\r\nconst modalImg = document.querySelector( `.modal-img` );\r\nconst nextPicture = document.querySelector( `.add-more` );\r\nlet query = ``;\r\n\r\nsearchForm.addEventListener( `submit`, onSearch )\r\n\r\nconst pnotifySet = {\r\n    text: \"We did not find any pictures for your request\",\r\n    delay: 3000,\r\n    addClass: `warning`,\r\n    width: '250px',\r\n    remove: true,\r\n    stack: {\r\n        context: modalDiv\r\n    },\r\n}\r\n\r\nconst targets = document.getElementsByClassName( 'modal-img' );\r\n\r\nconst options = {\r\n    root: null,\r\n    rootMargin: '0px',\r\n    threshold: 0.5\r\n}\r\n\r\nvar loadImage = function ( entries, observer ) {\r\n    if( page > 1 ) {\r\n        page += 1;\r\n        axios.get( `${url}${query}&page=${page}${perPage}${key}` )\r\n            .then( ( resp ) => {\r\n                const data = resp.data.hits;\r\n                const mark = data.reduce( ( acc, el ) => acc + `<li class=\"image-card\">${template( el )}</li>`, `` );\r\n                ul.insertAdjacentHTML( `beforeend`, mark );\r\n            } );\r\n    }\r\n};\r\n\r\nconst observer = new IntersectionObserver( loadImage, options );\r\n\r\ntargets.forEach( target => {\r\n    observer.observe( target )\r\n} )\r\n\r\nnextPicture.addEventListener( `click`, addNewPictures );\r\n\r\n//запрос картинок\r\nfunction onSearch (event) {\r\n    event.preventDefault();\r\n    //очищаем при новом запросе\r\n    ul.innerHTML = ``;\r\n    //получаем картинки\r\n    query = `&q=${input.value}`;\r\n    nextPicture.style.visibility = `hidden`;\r\n    axios.get( `${url}${query}&page=${page}${perPage}${key}` )\r\n        .then( response => {\r\n            const data = response.data.hits;\r\n            if( data.length >= 1 ) {\r\n                nextPicture.style.visibility = `visible`;\r\n            }\r\n            if( data.length < 11 ) {\r\n                nextPicture.disabled = true;\r\n            }\r\n            if( data.length === 0 ) {\r\n                PNotify.error( pnotifySet );\r\n            }\r\n            const markup = data.reduce( ( acc, el ) => acc + `<li class=\"image-card\">${template( el )}</li>`, `` );\r\n            ul.insertAdjacentHTML( `beforeend`, markup );\r\n        } )\r\n}\r\n\r\nfunction addNewPictures () {\r\n    page += 1;\r\n    axios.get( `${url}${query}&page=${page}${perPage}${key}` )\r\n        .then( ( resp ) => {\r\n            const data = resp.data.hits;\r\n            const mark = data.reduce( ( acc, el ) => acc + `<li class=\"image-card\">${template( el )}</li>`, `` );\r\n            ul.insertAdjacentHTML( `beforeend`, mark );\r\n        } );\r\n    nextPicture.removeAttribute( 'style' );\r\n}\r\n\r\nul.addEventListener( `click`, event => {\r\n    if( event.target.className === `gallery__image` ) {\r\n        modalDiv.setAttribute( `class`, `lightbox__overlay` );\r\n        modalDivButton.setAttribute( `class`, `lightbox__button` );\r\n        modalImg.setAttribute( `src`, `${event.target.src}` );\r\n    }\r\n} )\r\n\r\nmodalDivButton.addEventListener( `click`, closeModalWindow );\r\n\r\ndocument.addEventListener( `keyup`, event => {\r\n    if( event.key === `Escape` ) {\r\n        closeModalWindow();\r\n    }\r\n} );\r\n\r\nmodalDiv.addEventListener( `click`, ( event ) => {\r\n    if( event.target != modalImg ) {\r\n        closeModalWindow();\r\n    }\r\n} );\r\n\r\nfunction closeModalWindow () {\r\n    modalDiv.setAttribute( `class`, `` );\r\n    modalDivButton.setAttribute( `class`, `invisible` );\r\n    modalImg.setAttribute( `src`, `` );\r\n};"],"sourceRoot":""}